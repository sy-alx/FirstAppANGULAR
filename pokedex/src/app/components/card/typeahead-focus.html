<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<div class="container">
  <label class="d-flex justify-content-center custom" for="typeahead-focus">Choisissez vos Pokémon's</label>

  <div class="search-container">
    <input 
      id="typeahead-name"
      type="text"
      class="form-control"
      [(ngModel)]="selectedPokemonName"
      [ngbTypeahead]="search"
      (focus)="focus$.next($any($event).target.value)"
      (click)="click$.next($any($event).target.value)"
      #instance="ngbTypeahead"
      (selectItem)="onSelectPokemon($event)"
    />
    
    <button class="reset-button" (click)="resetTable()">
      <div class="icon"></div>
      <div class="resetText">Reset</div>
    </button>
  </div>



  <hr />

  <p-table #dt [value]="data" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="ID">N°<p-sortIcon field="ID"></p-sortIcon></th>
        <th pSortableColumn="Nom">Nom<p-sortIcon field="Nom"></p-sortIcon></th>
        <th pSortableColumn="Poid">Poid<p-sortIcon field="Poid"></p-sortIcon></th>
        <th pSortableColumn="Taille">Taille<p-sortIcon field="Taille"></p-sortIcon></th>
        <th pSortableColumn="Type">Type<p-sortIcon field="Type"></p-sortIcon></th>
        <th pSortableColumn="HP">HP<p-sortIcon field="HP"></p-sortIcon></th>
        <th pSortableColumn="Attaque">Attaque<p-sortIcon field="Attaque"></p-sortIcon></th>
        <th pSortableColumn="Defense">Defense<p-sortIcon field="Defense"></p-sortIcon></th>
        <th pSortableColumn="SpecialAttaque">Special Attaque<p-sortIcon field="SpecialAttaque"></p-sortIcon></th>
        <th pSortableColumn="SpecialDefense">Special Defense<p-sortIcon field="SpecialDefense"></p-sortIcon></th>
        <th pSortableColumn="Vitesse">Vitesse<p-sortIcon field="Vitesse"></p-sortIcon></th>
        <th>Visuel</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-product>
      <tr>
        <td>{{ product.ID }}</td>
        <td>{{ product.Nom }}</td>
        <td>{{ product.Poid }} Kg</td>
        <td>{{ product.Taille }} m</td>
        <td>{{ product.Type }}</td>
        <td>{{ product.HP | json }}</td>
        <td>{{ product.Attaque | json }}</td>
        <td>{{ product.Defense | json }}</td>
        <td>{{ product.SpecialAttaque | json }}</td>
        <td>{{ product.SpecialDefense | json }}</td>
        <td>{{ product.Vitesse | json }}</td>

        <td>
          <button class="LookIMG" type="button" (click)="open(content, product.ID)">
            <div class="icon2"></div>
            <div class="IMGText">Voir</div>
          </button>
        </td>
      </tr>
    </ng-template>  
  </p-table>

  <ng-template #content let-modal >
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">{{ selectedPokemonName }}</h4>
    </div>
    <div class="modal-body">
      <img [src]="selectedPokemonImage" alt="">
    </div>
  </ng-template>



</div>
